
# Документация для AuthController и UserController

## AuthController

`AuthController` предоставляет два основных эндпоинта для регистрации и аутентификации пользователей. Эти эндпоинты используют сервис `AuthService` для выполнения логики регистрации и аутентификации.

### Эндпоинты

#### 1. **POST /api/v1/auth/register**
Этот эндпоинт используется для регистрации нового пользователя.

**Запрос:**
- **URL:** `/api/v1/auth/register`
- **Метод:** `POST`
- **Тело запроса:** JSON объект с данными для регистрации пользователя.

**Пример тела запроса:**
```json
{
  "firstName": "John",
  "secondName": "Doe",
  "email": "john.doe@example.com",
  "password": "Password@123"
}
```

- `firstName`: Имя пользователя.
- `secondName`: Фамилия пользователя.
- `email`: Электронная почта пользователя (должна быть уникальной).
- `password`: Пароль пользователя.

**Ответ:**
- **Статус:** 200 OK, если регистрация прошла успешно.
- **Тело ответа:** `AuthenticationResponseDto` с токеном для аутентификации.

**Пример тела ответа:**
```json
{
  "token": "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJqb2huLmRvZUBleGFtcGxlLmNvbSIsImlhdCI6MTY0MjYyMzAwMCwiZXhwIjoxNjQyNjI2NjAwfQ.xxxxx"
}
```

#### 2. **POST /api/v1/auth/authenticate**
Этот эндпоинт используется для аутентификации пользователя.

**Запрос:**
- **URL:** `/api/v1/auth/authenticate`
- **Метод:** `POST`
- **Тело запроса:** JSON объект с данными для аутентификации.

**Пример тела запроса:**
```json
{
  "email": "john.doe@example.com",
  "password": "Password@123",
  "rememberMe": true
}
```

- `email`: Электронная почта пользователя.
- `password`: Пароль пользователя.
- `rememberMe`: Флаг для указания, нужно ли запомнить пользователя.

**Ответ:**
- **Статус:** 200 OK, если аутентификация прошла успешно.
- **Тело ответа:** `AuthenticationResponseDto` с токеном для аутентификации.

---

## UserController

`UserController` предоставляет функциональность для изменения пароля пользователя. Этот контроллер использует `AuthService` для выполнения основной логики изменения пароля и проверки подтверждающего кода.

### Эндпоинты

#### 1. **POST /api/v1/user/reset-password**
Этот эндпоинт используется для сброса пароля пользователя. Для этого необходимо передать подтверждающий код и новые данные для смены пароля.

**Запрос:**
- **URL:** `/api/v1/user/reset-password`
- **Метод:** `POST`
- **Тело запроса:** JSON объект с данными для смены пароля.

**Пример тела запроса:**
```json
{
  "code": "0000",
  "currentPassword": "Password@123)",
  "newPassword": "NewPassword@123)",
  "confirmationPassword": "NewPassword@123)"
}
```

- `code`: Подтверждающий код для изменения пароля (обязательно). В данном случае код `"0000"` является валидным. Если код не совпадает, будет выброшено исключение.
- `currentPassword`: Текущий пароль пользователя (обязательно). Это необходимо для проверки подлинности пользователя.
- `newPassword`: Новый пароль, который пользователь хочет установить (обязательно).
- `confirmationPassword`: Подтверждение нового пароля (обязательно). Должно совпадать с полем `newPassword`.

**Ответ:**
- **Статус:** 200 OK, если пароль был успешно изменен.
- **Тело ответа:** Пустой ответ (Void).

---

### Описание работы

1. **Изменение пароля пользователя:**
    - Пользователь отправляет запрос с подтверждающим кодом, текущим паролем и новым паролем на эндпоинт `/api/v1/user/reset-password`.
    - Контроллер проверяет код подтверждения, и если он не совпадает с ожидаемым значением `"0000"`, выбрасывает исключение `InvalidConfirmationCodeException`.
    - После проверки кода контроллер вызывает сервис `AuthService` для изменения пароля пользователя.
    - Если смена пароля прошла успешно, в ответ возвращается статус 200 OK, что означает успешное выполнение операции.

---


## 3. Роли и доступ к эндпоинтам

Для обеспечения безопасности, доступ к определённым эндпоинтам ограничен ролями пользователя:

### 3.1. Эндпоинты для всех пользователей:
- **`/api/v1/auth/register`** — Доступен всем пользователям для регистрации.
- **`/api/v1/auth/authenticate`** — Доступен всем пользователям для аутентификации.

### 3.2. Эндпоинты для пользователей с ролью `USER`:
- **`/currencies/rates/{code}`**

### 3.3. Эндпоинты для пользователей с ролью `ADMIN`:
- **`/currencies/convert`**


# О себе

## Опыт и навыки

Меня зовут Глеб. Последние полтора года я занимался разработкой мобильных приложений в аутсорс фирме. Спустя время разработки понял, что backend является для меня более интересным направлением, потому что способен предложить более сложные и масштабные проекты.

За время обучения я успел поработать с:
- **Java**
- **Maven**
- **Spring Boot**
- **SQL**
- **PostgreSQL**
- **Hibernate**
- **Liquibase**
- **JUnit**
- **Mockito**
- **Docker**

Умею работать в команде и находить общий язык. Хорошо знаю английский.

## Цели

На курсе я хочу прокачать свои знания и получить фидбек от опытных разработчиков.

Я давно хочу попасть в штат Т-банка. Летом 2024 я собеседовался на позицию стажера и стал топ 2 кандидатом. Выбор сделали в пользу другого кандидата из-за его прохождения fintech курса(обратная связь от hr), поэтому итоговой целью является попадание в штат.


## Курсовой проект

Не определился